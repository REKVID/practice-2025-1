## 1. –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –∏ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–¥–∞—á

### 1.1. –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞
–°–æ–∑–¥–∞–Ω–∏–µ Telegram-–±–æ—Ç–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ü–µ–Ω–∞—Ö –∞–∫—Ü–∏–π –Ω–∞ –ú–æ—Å–∫–æ–≤—Å–∫–æ–π –±–∏—Ä–∂–µ –∏ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏—è—Ö.

### 1.2. –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–æ—Ç–∞:
- `/start` ‚Äî –Ω–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã —Å –±–æ—Ç–æ–º, –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
- `/help` ‚Äî —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º
- `/price <—Ç–∏–∫–µ—Ä>` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Ü–µ–Ω—ã –∞–∫—Ü–∏–∏ –ø–æ –µ—ë —Ç–∏–∫–µ—Ä—É
- `/list` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∞–∫—Ü–∏–π
- `/events` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏—è—Ö

### 1.3. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±–æ—Ç–∞
–ë–æ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–≤–∞ —Å–ø–æ—Å–æ–±–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è:
1. –¢–µ–∫—Å—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
2. –ö–Ω–æ–ø–∫–∏ –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞:
   -  –¶–µ–Ω–∞ –∞–∫—Ü–∏–∏
   -  –°–ø–∏—Å–æ–∫ –∞–∫—Ü–∏–π
   -  –≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è
   -  –ü–æ–º–æ—â—å

### 1.4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- API –ú–æ—Å–∫–æ–≤—Å–∫–æ–π –±–∏—Ä–∂–∏ (—á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫—É apimoex)

## 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 2.1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python

–î–ª—è —Ä–∞–±–æ—Ç—ã –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è **Python (‚â•3.9)** –∏ **pip**.

- **Windows**: —Å–∫–∞—á–∞–π—Ç–µ Windows Installer (.msi) —Å [python.org](https://python.org) –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ.
- **macOS**: —á–µ—Ä–µ–∑ Homebrew: `brew install python` –∏–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ .pkg —Å —Å–∞–π—Ç–∞.
- **Ubuntu/Debian**:
  ```bash
  sudo apt update
  sudo apt install python3.9 python3-pip
  ```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
```bash
python3 --version  # –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 3.9 –∏–ª–∏ –≤—ã—à–µ
pip3 --version
```

### 2.2. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞ –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–µ—ë:
   ```bash
   mkdir moex_bot && cd moex_bot
   ```
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
   ```bash
   python3 -m venv venv
   source venv/bin/activate  # –¥–ª—è Linux/macOS
   venv\Scripts\activate     # –¥–ª—è Windows
   ```

### 2.3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —á–µ—Ä–µ–∑ —Ñ–∞–π–ª requirements.txt:
```bash
pip install -r requirements.txt
```

### 2.4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
```env
BOT_TOKEN=–í–ê–®_–¢–û–ö–ï–ù_–ë–û–¢–ê
```

## 3. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –±–æ—Ç–∞ –≤ Telegram —á–µ—Ä–µ–∑ BotFather

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ **@BotFather**.
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`.
3. –ü—Ä–∏–¥—É–º–∞–π—Ç–µ –∏–º—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "MOEX Info Bot").
4. –ü—Ä–∏–¥—É–º–∞–π—Ç–µ username (–¥–æ–ª–∂–µ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ 'bot', –Ω–∞–ø—Ä–∏–º–µ—Ä "moex_info_bot").
5. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ –≤ `.env` —Ñ–∞–π–ª.
<img src="img/botFather.jpg" width="600" alt="–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞">

## 4. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
moex_bot/
‚îú‚îÄ‚îÄ moex_bot/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ bot.py           # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ config.py        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ handlers/        # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ events.py    # –û–±—Ä–∞–±–æ—Ç–∫–∞ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ list.py      # –°–ø–∏—Å–æ–∫ –∞–∫—Ü–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ price.py     # –ü–æ–ª—É—á–µ–Ω–∏–µ —Ü–µ–Ω –∞–∫—Ü–∏–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ start.py     # –ö–æ–º–∞–Ω–¥—ã start –∏ help
‚îÇ   ‚îî‚îÄ‚îÄ services/        # –°–µ—Ä–≤–∏—Å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îî‚îÄ‚îÄ moex.py      # –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API –ú–æ—Å–∫–æ–≤—Å–∫–æ–π –±–∏—Ä–∂–∏
‚îú‚îÄ‚îÄ requirements.txt     # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ run.py              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞
‚îî‚îÄ‚îÄ .env                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
```

## 5. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –±–æ—Ç–∞

### 5.1. –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞ (bot.py)

```python
import logging
from telegram.ext import Application, CommandHandler, MessageHandler, filters

from .config import BOT_TOKEN

from .handlers import (
    start_command,
    price_command,
    list_command,
    events_command,
    help_command,
)

logging.basicConfig(
    format="%(asctime)s - %(name)s - %(levelname)s - %(message)s", level=logging.INFO
)
logger = logging.getLogger(__name__)


async def handle_message(update, context):
    text = update.message.text

    if text == "üí∞ –¶–µ–Ω–∞ –∞–∫—Ü–∏–∏":
        await update.message.reply_text(
            "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ:\n/price <—Ç–∏–∫–µ—Ä>\n\n–ù–∞–ø—Ä–∏–º–µ—Ä: /price SBER"
        )
    elif text == "üìã –°–ø–∏—Å–æ–∫ –∞–∫—Ü–∏–π":
        await list_command(update, context)
    elif text == "üìÖ –≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è":
        await events_command(update, context)
    elif text == "‚ÑπÔ∏è –ü–æ–º–æ—â—å":
        await help_command(update, context)
    else:
        await update.message.reply_text(
            "–Ø –Ω–µ –ø–æ–Ω–∏–º–∞—é —ç—Ç—É –∫–æ–º–∞–Ω–¥—É. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /help –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥."
        )


def main() -> None:
    logger.info("–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞...")

    application = Application.builder().token(BOT_TOKEN).build()

    application.add_handler(CommandHandler("start", start_command))
    application.add_handler(CommandHandler("price", price_command))
    application.add_handler(CommandHandler("list", list_command))
    application.add_handler(CommandHandler("events", events_command))
    application.add_handler(CommandHandler("help", help_command))

    application.add_handler(
        MessageHandler(
            filters.TEXT & ~filters.COMMAND & ~filters.Regex(r"^/start$"),
            handle_message,
        )
    )

    logger.info("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω")
    application.run_polling(allowed_updates=["message"])


if __name__ == "__main__":
    main()
```

### 5.2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (config.py)

```python
import os
from dotenv import load_dotenv

load_dotenv()

BOT_TOKEN = os.getenv("BOT_TOKEN")
MOEX_TOP_STOCKS = 50
```

## 6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API –ú–æ—Å–∫–æ–≤—Å–∫–æ–π –±–∏—Ä–∂–∏

### 6.1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ü–µ–Ω—ã –∞–∫—Ü–∏–∏ (–∫–æ–º–∞–Ω–¥–∞ /price)

```python
from telegram import Update
from telegram.ext import ContextTypes
import logging

from ..services.moex import get_stock_price, check_ticker_exists

logging.basicConfig(
    format="%(asctime)s - %(name)s - %(levelname)s - %(message)s", level=logging.INFO
)
logger = logging.getLogger(__name__)


async def price_command(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    if not context.args or len(context.args) < 1:
        await update.message.reply_text(
            "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ —Ç–∏–∫–µ—Ä –∞–∫—Ü–∏–∏ –ø–æ—Å–ª–µ –∫–æ–º–∞–Ω–¥—ã.\n–ù–∞–ø—Ä–∏–º–µ—Ä: /price SBER"
        )
        return

    ticker = context.args[0].upper()
    logger.info(f"–ó–∞–ø—Ä–æ—à–µ–Ω–∞ —Ü–µ–Ω–∞ –∞–∫—Ü–∏–∏ {ticker}")

    if not check_ticker_exists(ticker):
        await update.message.reply_text(
            f"‚ùå –ê–∫—Ü–∏—è —Å —Ç–∏–∫–µ—Ä–æ–º {ticker} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –Ω–∞ –ú–æ—Å–±–∏—Ä–∂–µ.\n"
            "–í–≤–µ–¥–∏—Ç–µ /list –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∞–∫—Ü–∏–π."
        )
        return

    price = get_stock_price(ticker)

    if price is not None:
        await update.message.reply_text(f"üí∞ –¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ –∞–∫—Ü–∏–∏ {ticker}: {price} RUB")
    else:
        await update.message.reply_text(
            f"‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Ü–µ–Ω—É –∞–∫—Ü–∏–∏ {ticker}.\n"
            "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ."
        )
```

–°–µ—Ä–≤–∏—Å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–µ–Ω—ã –∞–∫—Ü–∏–∏:

```python
def get_stock_price(ticker: str) -> Optional[float]:
    try:
        with requests.Session() as session:
            securities = apimoex.find_securities(
                session, ticker.upper(), columns=("secid",)
            )

            if not securities:
                logger.warning(f"–ê–∫—Ü–∏—è —Å —Ç–∏–∫–µ—Ä–æ–º {ticker} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞")
                return None

            data = apimoex.get_board_securities(
                session, table="marketdata", board="TQBR", columns=("SECID", "LAST")
            )

            for item in data:
                if item.get("SECID") == ticker.upper() and item.get("LAST") is not None:
                    return item["LAST"]

            logger.warning(f"–î–ª—è –∞–∫—Ü–∏–∏ {ticker} –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ —Ü–µ–Ω–µ")
            return None

    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Ü–µ–Ω—ã –∞–∫—Ü–∏–∏ {ticker}: {str(e)}")
        return None

def check_ticker_exists(ticker: str) -> bool:
    try:
        with requests.Session() as session:
            securities = apimoex.find_securities(
                session, ticker.upper(), columns=("secid",)
            )
            return len(securities) > 0
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ç–∏–∫–µ—Ä–∞ {ticker}: {str(e)}")
        return False

```

<img src="img/price.jpg" width="600" alt="price">

### 6.2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∞–∫—Ü–∏–π (–∫–æ–º–∞–Ω–¥–∞ /list)

```python
from telegram import Update
from telegram.ext import ContextTypes
import logging

from ..services.moex import get_top_stocks
from ..config import MOEX_TOP_STOCKS

logging.basicConfig(
    format="%(asctime)s - %(name)s - %(levelname)s - %(message)s", level=logging.INFO
)
logger = logging.getLogger(__name__)


async def list_command(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    logger.info("–ó–∞–ø—Ä–æ—à–µ–Ω —Å–ø–∏—Å–æ–∫ –∞–∫—Ü–∏–π")

    status_message = await update.message.reply_text(
        "‚è≥ –ó–∞–≥—Ä—É–∂–∞—é —Å–ø–∏—Å–æ–∫ —Ç–æ–ø-50 –∞–∫—Ü–∏–π –ø–æ –∫–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏–∏...\n"
        "–≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥."
    )

    stocks = get_top_stocks(limit=MOEX_TOP_STOCKS)

    if not stocks:
        await status_message.edit_text(
            "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∞–∫—Ü–∏–π.\n–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ."
        )
        return

    message = "üìã –¢–æ–ø-50 –∞–∫—Ü–∏–π –ú–æ—Å–±–∏—Ä–∂–∏ –ø–æ –∫–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏–∏:\n\n"

    for i, stock in enumerate(stocks, 1):
        message += f"{i}. {stock['ticker']}: {stock['name']}\n"

    message += "\n–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–µ–Ω—ã –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É /price <—Ç–∏–∫–µ—Ä>"

    await status_message.edit_text(message)

```

–°–µ—Ä–≤–∏—Å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∞–∫—Ü–∏–π:

```python
def get_top_stocks(limit: int = 50) -> List[Dict[str, str]]:
    try:
        with requests.Session() as session:
            data = apimoex.get_board_securities(
                session,
                board="TQBR",
                columns=(
                    "SECID",
                    "SHORTNAME",
                    "MARKETVALUE",
                    "ISIN",
                    "ISSUESIZE",
                    "PREVLEGALCLOSEPRICE",
                ),
            )

            stocks_with_cap = []
            for item in data:
                if "SECID" in item and "SHORTNAME" in item:
                    market_value = item.get("MARKETVALUE")

                    if market_value is None or market_value == 0:
                        issue_size = item.get("ISSUESIZE")
                        price = item.get("PREVLEGALCLOSEPRICE")

                        if issue_size and price:
                            market_value = issue_size * price

                    stocks_with_cap.append(
                        {
                            "ticker": item["SECID"],
                            "name": item["SHORTNAME"],
                            "capitalization": market_value if market_value else 0,
                        }
                    )

            sorted_stocks = sorted(
                stocks_with_cap,
                key=lambda x: x["capitalization"] if x["capitalization"] else 0,
                reverse=True,
            )

            result = []
            for i, stock in enumerate(sorted_stocks[:limit]):
                result.append({"ticker": stock["ticker"], "name": stock["name"]})

            return result
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–ø–∏—Å–∫–∞ –∞–∫—Ü–∏–π: {str(e)}")
        return []
```

<img src="img/list.jpg" width="600" alt="list">

## 7. –ó–∞–ø—É—Å–∫ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–æ–º

### 7.1. –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ —Å–æ–∑–¥–∞–Ω —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª `run.py`, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è —Ç–æ—á–∫–æ–π –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

```python
from moex_bot.bot import main

if __name__ == "__main__":
    main()
```

–ß—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:

```bash
python run.py
```

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ `requirements.txt`.

## 8. –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—è

### 8.1. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

1. –ü–æ–ª—É—á–µ–Ω–∏–µ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π (–∫–æ–º–∞–Ω–¥–∞ /events)
   - –§—É–Ω–∫—Ü–∏—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏—è—Ö –Ω–∞ —Å–∞–π—Ç–µ –†–ë–ö
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ —Å—Å—ã–ª–∫–æ–π –Ω–∞ —Ä–∞–∑–¥–µ–ª —ç–∫–æ–Ω–æ–º–∏–∫–∏ —Å–∞–π—Ç–∞ –†–ë–ö
   - –ü—Ä–æ—Å—Ç–æ–π –∏ –Ω–∞–¥–µ–∂–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

```python
from telegram import Update
from telegram.ext import ContextTypes
import logging

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    format="%(asctime)s - %(name)s - %(levelname)s - %(message)s", level=logging.INFO
)
logger = logging.getLogger(__name__)


async def events_command(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    logger.info("–ó–∞–ø—Ä–æ—à–µ–Ω—ã —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è")

    await update.message.reply_text(
        "üìä *–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è*\n\n"
        "–ê–∫—Ç—É–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏—è—Ö –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ —Å—Å—ã–ª–∫–µ:\n"
        "https://www.rbc.ru/economics/",
        parse_mode="Markdown"
    )
```

<img src="img/events.jpg" width="600" alt="–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞">

